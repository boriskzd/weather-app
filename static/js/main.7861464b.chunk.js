(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{386:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(45),i=a.n(r),o=a(438),s=a(448),l=a(452),d=a(447),j=a(446),x=a(449),h=a(450),b=a(451),u=a(444),p=a(2),m=function(e){var t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][new Date(1e3*e.day.dt).getDay()].slice(0,3),a=Math.round(e.day.temp.min),n=Math.round(e.day.temp.max),c=e.day.weather[0].description,r="http://openweathermap.org/img/wn/".concat(e.day.weather[0].icon,"@2x.png");return Object(p.jsxs)(j.a,{variant:"outlined",sx:{width:80,marginBottom:"5px"},children:[Object(p.jsx)(d.a,{sx:{color:"text.secondary",textAlign:"center",fontSize:14},children:t}),Object(p.jsx)("div",{style:{width:"100%"},children:Object(p.jsx)("img",{src:r,alt:c,width:"80px",height:"80px"})}),Object(p.jsxs)(d.a,{sx:{color:"text.primary",textAlign:"center",fontSize:14},children:[n,"\xb0- ",a,"\xb0"]}),Object(p.jsx)(d.a,{sx:{color:"text.secondary",textAlign:"center",fontSize:10},children:c})]})},O=a(131),y=a(15),g=a(440),f=a(439),w=a(154),v=a(44),S=Object(w.a)({reducerPath:"",baseQuery:Object(v.d)({baseUrl:"https://api.openweathermap.org/"}),endpoints:function(e){return{getWeatherByCity:e.query({query:function(e){return"data/2.5/onecall?lat=".concat(e.lat,"&lon=").concat(e.lon,"&units=metric&exclude=minutely&appid=bfd623391de7c5ae0f4979b6a11b1f77")}}),getCities:e.query({query:function(e){return"geo/1.0/direct?q=".concat(e,"&limit=5&appid=bfd623391de7c5ae0f4979b6a11b1f77")}})}}}),C=S.useGetWeatherByCityQuery,W=S.useGetCitiesQuery,k=a(33),M=a(17),z={name:"Zagreb",country:"HR",lat:45.8144,lon:15.978,state:void 0},A=Object(M.d)({name:"weather",initialState:z,reducers:{setLatLong:function(e,t){e.lat=t.payload.lat,e.lon=t.payload.lon,e.country=t.payload.country,e.name=t.payload.name}}}),D=A.actions.setLatLong,E=A.reducer,L=function(){var e=Object(n.useState)(""),t=Object(y.a)(e,2),a=t[0],c=t[1],r=W(a),i=r.data,o=r.isLoading,l=Object(k.d)(),d=[];o||void 0===i||(d=i);var x=function(e){c(e.target.value)};return Object(p.jsx)(j.a,{children:Object(p.jsx)(s.a,{sx:{marginBottom:2},children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(p.jsx)(g.a,{disablePortal:!0,id:"search-city-autocomplete",onChange:function(e,t){console.log("handle select"),console.log(t),console.log(t.lat),l(D(t))},options:d,getOptionLabel:function(e){return"".concat(e.name,", ").concat(e.country)},renderOption:function(e,t){return Object(n.createElement)(s.a,Object(O.a)(Object(O.a)({component:"li",sx:{"& > img":{mr:2,flexShrink:0}}},e),{},{key:Math.random()}),Object(p.jsx)("img",{width:"24",src:"https://flagcdn.com/".concat(t.country.toLowerCase(),".svg"),alt:"",style:{boxShadow:"1px 1px 4px #bbb"}}),t.name," (",t.country,")")},renderInput:function(e){return Object(p.jsx)(f.a,Object(O.a)({label:"Search City",variant:"filled",onChange:x},e))}})})})})},N=a(445),T=function(e){var t=Object(k.e)((function(e){return e.weather})),a="".concat(t.name,", ").concat(t.country),n="http://openweathermap.org/img/wn/".concat(e.data.weather[0].icon,"@2x.png"),c=e.data.weather[0].description,r=c[0].toUpperCase()+c.slice(1)+".",i=e.data,o=i.temp,l=i.pressure,j=i.dew_point,x=i.uvi,h=i.humidity,b=i.wind_speed,u=i.wind_deg,m=i.visibility,O=function(e){var t=["N","N/NE","NE","E/NE","E","E/SE","SE","S/SE","S","S/SW","SW","W/SW","W","W/NW","NW","N/NW"],a=360/t.length;return t[Math.round(e/a)]}(u),y=function(e){return e>1e3?"".concat(Math.round(e/1e3)," km"):"".concat(e," m")}(m);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(d.a,{variant:"h5",children:[Object(p.jsx)("img",{width:"32",src:"https://flagcdn.com/".concat(t.country.toLowerCase(),".svg"),alt:"",style:{marginRight:4,boxShadow:"1px 1px 4px #bbb"}})," ",a]}),Object(p.jsxs)(N.a,{container:!0,children:[Object(p.jsxs)(N.a,{item:!0,xs:12,sm:4,children:[Object(p.jsxs)(s.a,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(p.jsx)("img",{src:n,alt:c,width:"100px",height:"100px"}),Object(p.jsxs)(d.a,{variant:"h5",sx:{},children:[Math.round(o)," \xb0C"]})]}),Object(p.jsx)(d.a,{variant:"subtitle2",children:r})]}),Object(p.jsx)(N.a,{item:!0,xs:12,sm:8,children:Object(p.jsxs)(N.a,{container:!0,sx:{paddingLeft:2},children:[Object(p.jsxs)(N.a,{item:!0,xs:6,sm:6,children:[Object(p.jsx)(s.a,{children:Object(p.jsxs)(d.a,{variant:"caption",children:["Wind: ",b.toFixed(1)," m/s ",O]})}),Object(p.jsx)(s.a,{children:Object(p.jsx)(d.a,{variant:"caption",children:Object(p.jsxs)(d.a,{variant:"caption",children:["Humidity: ",h,"%"," "]})})}),Object(p.jsx)(s.a,{children:Object(p.jsxs)(d.a,{variant:"caption",children:["Visibility: ",y]})})]}),Object(p.jsxs)(N.a,{item:!0,xs:6,sm:6,children:[Object(p.jsx)(s.a,{children:Object(p.jsx)(d.a,{variant:"caption",children:Object(p.jsxs)(d.a,{variant:"caption",children:["Pressure: ",l," hPa"]})})}),Object(p.jsx)(s.a,{children:Object(p.jsx)(d.a,{variant:"caption",children:Object(p.jsxs)(d.a,{variant:"caption",children:["Dew point: ",Math.round(j)," \xb0C"]})})}),Object(p.jsx)(s.a,{children:Object(p.jsx)(d.a,{variant:"caption",children:Object(p.jsxs)(d.a,{variant:"caption",children:["UV: ",x]})})})]})]})})]})]})},B=a(433),I=a(443),F=a(219),P=a(221),q=a(217),G=a(437),H=a(220),K=a(108),Q=a(112);function R(e){console.log("grafulja"),console.table(e.prognoza[0]);var t=e.prognoza.slice(0,24),a=100,n=-100;t=t.map((function(e){var t={};return t.temp=Math.round(e.temp),t.rain=Math.round(100*e.pop),t.temp>n&&(n=t.temp),t.temp<a&&(a=t.temp),t.time=new Date(1e3*e.dt).getHours(),t})),n<2&&(n=2);var c=(n-a)/5<1?1:Math.round(.2*(n-a));a-=c,n+=c,console.log("newData"),console.log(t);return Object(p.jsx)(B.a,{width:"100%",height:250,children:Object(p.jsxs)(I.a,{width:660,height:250,data:t,margin:{top:20,right:-25,left:-30,bottom:10},children:[Object(p.jsx)("defs",{children:Object(p.jsxs)("linearGradient",{id:"temperatureGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(p.jsx)("stop",{offset:"5%",stopColor:"#fec821",stopOpacity:.8}),Object(p.jsx)("stop",{offset:"95%",stopColor:"#eda31d",stopOpacity:0})]})}),Object(p.jsx)(F.a,{yAxisId:1,dataKey:"temp",name:"Temperature \xb0C",type:"monotone",stroke:"#eda31d",fill:"url(#temperatureGradient)",label:function(e){e.payload;var t=e.x,a=e.y,n=(e.width,e.height,e.value),c=e.index,r=null;return c%3===0&&0!==c&&(r=Object(p.jsxs)("text",{x:t,y:a,dy:-8,fill:"#777",fontSize:10,textAnchor:"middle",children:[n," \xb0C"]})),r},legendType:"square"}),Object(p.jsx)(P.a,{yAxisId:1,domain:[a,n],allowDecimals:!1}),Object(p.jsx)(q.a,{yAxisId:2,dataKey:"rain",name:"Precipitation %",type:"monotone",label:function(e){e.payload;var t=e.x,a=e.y,n=e.value,c=e.index,r=(e.cx,null);return c%3===0&&0!==c&&(r=Object(p.jsxs)("text",{x:t,y:a,dy:-8,fill:"rgb(49, 130, 189)",fontSize:10,color:"blue",textAnchor:"middle",children:[n,"%"]})),r},stroke:"rgb(49, 130, 189)",dot:{r:2}}),Object(p.jsx)(P.a,{yAxisId:2,domain:[0,100],orientation:"right"}),Object(p.jsx)(G.a,{strokeDasharray:"3 6"}),Object(p.jsx)(H.a,{dataKey:"time",interval:2,tick:function(e){var t=e.payload,a=e.x,n=e.y;e.width,e.height,e.value;return Object(p.jsx)("text",{x:a,y:n,fill:"#666",textAnchor:"middle",dy:15,fontSize:12,children:"".concat(t.value,":00")})}}),Object(p.jsx)(K.a,{}),Object(p.jsx)(Q.a,{labelFormatter:function(e,t,a){return"Time: ".concat(e,":00 h")},formatter:function(e,t,a){var n="";switch(console.log(t),console.log(e),console.log(a),t){case"Temperature \xb0C":n="Temp: ".concat(e," \xb0C");break;case"Precipitation %":n="Rain: ".concat(e," % chance");break;default:n="Default: "+e}return[n]}})]})})}function U(){var e=Object(k.e)((function(e){return e.weather}));console.log("lat long: "),console.log(e);var t=C(e),a=t.data,n=t.isLoading;return console.log(a),n?Object(p.jsx)("div",{children:"Is Loading..."}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(d.a,{variant:"h4",align:"center",sx:{color:"white",paddingTop:2,paddingBottom:2},children:"Weather App"}),Object(p.jsx)(L,{}),Object(p.jsx)(j.a,{elevation:0,children:Object(p.jsx)(x.a,{children:Object(p.jsxs)(h.a,{children:[Object(p.jsx)(T,{data:a.current}),Object(p.jsx)(b.a,{children:Object(p.jsx)(u.a,{label:"Daily",size:"small"})}),Object(p.jsx)(R,{prognoza:a.hourly}),Object(p.jsx)(b.a,{children:Object(p.jsx)(u.a,{label:"Next 7 days",size:"small"})}),Object(p.jsx)(s.a,{sx:{display:"flex",flexFlow:"row nowrap",gap:"5px",overflowY:"auto",minWidth:240,marginTop:"10px"},children:a.daily.map((function(e){return Object(p.jsx)(m,{day:e},e.dt)}))})]})})})]})}var _=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(o.a,{}),Object(p.jsx)(s.a,{sx:{backgroundColor:"#00003f",paddingBottom:"50px"},children:Object(p.jsx)(l.a,{maxWidth:"sm",children:Object(p.jsx)(U,{})})})]})},J=a(4),V=Object(M.a)({reducer:Object(J.a)({weather:E},S.reducerPath,S.reducer),middleware:function(e){return e().concat(S.middleware)}});Object(v.e)(V.dispatch);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(k.a,{store:V,children:Object(p.jsx)(_,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[386,1,2]]]);
//# sourceMappingURL=main.7861464b.chunk.js.map