(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{386:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(45),i=a.n(r),s=a(438),o=a(447),d=a(452),l=a(448),j=a(446),x=a(450),h=a(451),b=a(449),u=a(444),p=a(130),m=a(15),O=a(440),y=a(439),g=a(153),f=a(44),v=Object(g.a)({reducerPath:"",baseQuery:Object(f.d)({baseUrl:"https://api.openweathermap.org/"}),endpoints:function(e){return{getWeatherByCity:e.query({query:function(e){return"data/2.5/onecall?lat=".concat(e.lat,"&lon=").concat(e.lon,"&units=metric&exclude=minutely&appid=bfd623391de7c5ae0f4979b6a11b1f77")}}),getCities:e.query({query:function(e){return"geo/1.0/direct?q=".concat(e,"&limit=5&appid=bfd623391de7c5ae0f4979b6a11b1f77")}})}}}),w=v.useGetWeatherByCityQuery,S=v.useGetCitiesQuery,k=a(33),C=a(17),D={name:"Zagreb",country:"HR",lat:45.8144,lon:15.978,state:void 0},A=Object(C.d)({name:"weather",initialState:D,reducers:{setCurrentLocation:function(e,t){e.lat=t.payload.lat,e.lon=t.payload.lon,e.country=t.payload.country,e.name=t.payload.name}}}),W=A.actions.setCurrentLocation,M=A.reducer,E=a(1),T=function(){var e=Object(c.useState)(""),t=Object(m.a)(e,2),a=t[0],n=t[1],r=S(a),i=r.data,s=r.isLoading,d=Object(k.d)(),l=[];s||void 0===i||(l=i);var x=function(e){n(e.target.value)};return Object(E.jsx)(j.a,{children:Object(E.jsx)(o.a,{sx:{marginBottom:2},children:Object(E.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(E.jsx)(O.a,{disablePortal:!0,id:"search-city-autocomplete",autoHighlight:!0,onChange:function(e,t){console.log("handle select"),console.log(t),console.log(t.lat),d(W(t))},options:l,getOptionLabel:function(e){return"".concat(e.name,", ").concat(e.country)},renderOption:function(e,t){return Object(c.createElement)(o.a,Object(p.a)(Object(p.a)({component:"li",sx:{"& > img":{mr:2,flexShrink:0}}},e),{},{key:Math.random()}),Object(E.jsx)("img",{width:"24",src:"https://flagcdn.com/".concat(t.country.toLowerCase(),".svg"),alt:"",style:{boxShadow:"1px 1px 4px #bbb"}}),t.name," (",t.country,")")},renderInput:function(e){return Object(E.jsx)(y.a,Object(p.a)({label:"Search City",variant:"filled",onChange:x},e))}})})})})},F=a(445),L=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],N=["January","February","March","April","May","June","July","August","September","October","November","December"],z=a.p+"static/media/rainy-3.8c33eccc.svg",I=a.p+"static/media/rainy-6.130d6250.svg",B=a.p+"static/media/day.c33ef664.svg",P=a.p+"static/media/cloudy-day-1.213f9a41.svg",q=a.p+"static/media/cloudy-day-2.7fb7ecfc.svg",R=a.p+"static/media/cloudy-day-3.2164d3c4.svg",U=a.p+"static/media/snowy-3.b5422f54.svg",G=a.p+"static/media/thunder.19ff3c30.svg",H=a.p+"static/media/cloudy.24f9a474.svg",J=a.p+"static/media/weather.7eb91340.svg",K=function(e){console.log("".concat(e.icon," - ").concat(e.main," - ").concat(e.description));var t=null;switch(e.main){case"Clear":t=B;break;case"Thunderstorm":t=G;break;case"Drizzle":t=z;break;case"Rain":switch(e.id){case 500:case 501:case 502:case 503:case 504:t=z;break;case 511:t=U;break;case 520:case 521:case 522:case 523:t=I;break;default:console.log("D E F A U L T - Rain")}break;case"Clouds":switch(e.id){case 801:t=P;break;case 802:t=q;break;case 803:case 804:t=R;break;default:console.log("D E F A U L T - Clouds")}break;case"Snow":t=U;break;case"Mist":case"Smoke":case"Haze":case"Dust":case"Fog":case"Sand":case"Dust":case"Ash":case"Squall":case"Tornado":t=H;break;default:console.log("D E F A U L T"),t=J}return t},Q=function(e){var t=Object(k.e)((function(e){return e.weather})),a="".concat(t.name,", ").concat(t.country),c=("https://openweathermap.org/img/wn/".concat(e.data.weather[0].icon,"@2x.png"),K(e.data.weather[0])),n=e.data.weather[0].description,r=n[0].toUpperCase()+n.slice(1),i=new Date(1e3*e.data.dt),s=L[i.getDay()],d=i.getDate(),j=i.getMonth(),x="".concat(s,", ").concat(N[j]," ").concat(d),h=e.data,b=h.temp,u=h.pressure,p=h.dew_point,m=h.uvi,O=h.humidity,y=h.wind_speed,g=h.wind_deg,f=h.visibility,v=function(e){var t=["N","N/NE","NE","E/NE","E","E/SE","SE","S/SE","S","S/SW","SW","W/SW","W","W/NW","NW","N/NW"],a=360/t.length;return t[Math.round(e/a)]}(g),w=function(e){return e>1e3?"".concat(Math.round(e/1e3)," km"):"".concat(e," m")}(f),S={color:"text.secondary",paddingRight:.5};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(F.a,{container:!0,justifyContent:"space-between",children:[Object(E.jsx)(F.a,{item:!0,children:Object(E.jsxs)(l.a,{variant:"h5",children:[Object(E.jsx)("img",{width:"32",src:"https://flagcdn.com/".concat(t.country.toLowerCase(),".svg"),alt:"",style:{marginRight:4,boxShadow:"1px 1px 4px #bbb"}})," ",a]})}),Object(E.jsx)(F.a,{item:!0,children:Object(E.jsx)(l.a,{variant:"subtitle2",sx:{color:"text.secondary"},children:x})})]}),Object(E.jsxs)(F.a,{container:!0,alignItems:"center",children:[Object(E.jsx)(F.a,{item:!0,xs:12,sm:4,children:Object(E.jsxs)(o.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(E.jsxs)(o.a,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(E.jsx)("img",{src:c,alt:n,width:"100px",height:"100px"}),Object(E.jsxs)(l.a,{variant:"h5",children:[Math.round(b)," \xb0C"]})]}),Object(E.jsx)(l.a,{variant:"subtitle1",align:"center",children:r})]})}),Object(E.jsx)(F.a,{item:!0,xs:12,sm:8,children:Object(E.jsxs)(F.a,{container:!0,sx:{paddingLeft:2},children:[Object(E.jsxs)(F.a,{item:!0,xs:6,sm:6,children:[Object(E.jsxs)(o.a,{children:[Object(E.jsx)(l.a,{variant:"caption",sx:S,children:"Wind:"}),Object(E.jsxs)(l.a,{variant:"caption",children:[y.toFixed(1)," m/s ",v]})]}),Object(E.jsxs)(o.a,{children:[Object(E.jsx)(l.a,{variant:"caption",sx:S,children:"Humidity:"}),Object(E.jsxs)(l.a,{variant:"caption",children:[O,"% "]})]}),Object(E.jsxs)(o.a,{children:[Object(E.jsx)(l.a,{variant:"caption",sx:S,children:"Visibility:"}),Object(E.jsx)(l.a,{variant:"caption",children:w})]})]}),Object(E.jsxs)(F.a,{item:!0,xs:6,sm:6,children:[Object(E.jsxs)(o.a,{children:[Object(E.jsx)(l.a,{variant:"caption",sx:S,children:"Pressure:"}),Object(E.jsxs)(l.a,{variant:"caption",children:[u," hPa"]})]}),Object(E.jsxs)(o.a,{children:[Object(E.jsx)(l.a,{variant:"caption",sx:S,children:"Dew point:"}),Object(E.jsxs)(l.a,{variant:"caption",children:[Math.round(p)," \xb0C"]})]}),Object(E.jsxs)(o.a,{children:[Object(E.jsx)(l.a,{variant:"caption",sx:S,children:"UV:"}),Object(E.jsx)(l.a,{variant:"caption",children:m})]})]})]})})]})]})},_=a(433),V=a(443),Y=a(219),Z=a(221),$=a(217),X=a(437),ee=a(220),te=a(109),ae=a(113);function ce(e){var t=e.data.slice(0,24),a=100,c=-100;t=t.map((function(e){var t={};return t.temp=Math.round(e.temp),t.rain=Math.round(100*e.pop),t.temp>c&&(c=t.temp),t.temp<a&&(a=t.temp),t.time=new Date(1e3*e.dt).getHours(),t})),c<2&&(c=2);var n=(c-a)/5<1?1:Math.round(.2*(c-a));a-=n,c+=n;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(b.a,{children:Object(E.jsx)(u.a,{label:"Next 24 hours",size:"small"})}),Object(E.jsx)(_.a,{width:"100%",height:250,children:Object(E.jsxs)(V.a,{width:660,height:250,data:t,margin:{top:20,right:-25,left:-30,bottom:10},children:[Object(E.jsx)("defs",{children:Object(E.jsxs)("linearGradient",{id:"temperatureGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(E.jsx)("stop",{offset:"5%",stopColor:"#fec821",stopOpacity:.8}),Object(E.jsx)("stop",{offset:"95%",stopColor:"#eda31d",stopOpacity:0})]})}),Object(E.jsx)(Y.a,{yAxisId:1,dataKey:"temp",name:"Temperature \xb0C",type:"monotone",stroke:"#eda31d",fill:"url(#temperatureGradient)",label:function(e){e.payload;var t=e.x,a=e.y,c=(e.width,e.height,e.value),n=e.index,r=null;return n%3===0&&0!==n&&(r=Object(E.jsxs)("text",{x:t,y:a,dy:-8,fill:"#777",fontSize:10,textAnchor:"middle",children:[c," \xb0C"]})),r},legendType:"plainline"}),Object(E.jsx)(Z.a,{yAxisId:1,domain:[a,c],allowDecimals:!1}),Object(E.jsx)($.a,{yAxisId:2,dataKey:"rain",name:"Precipitation %",type:"monotone",label:function(e){e.payload;var t=e.x,a=e.y,c=e.value,n=e.index,r=(e.cx,null);return n%3===0&&0!==n&&(r=Object(E.jsxs)("text",{x:t,y:a,dy:-8,fill:"rgb(49, 130, 189)",fontSize:10,color:"blue",textAnchor:"middle",children:[c,"%"]})),r},stroke:"rgb(49, 130, 189)",dot:{r:2}}),Object(E.jsx)(Z.a,{yAxisId:2,domain:[0,100],orientation:"right"}),Object(E.jsx)(X.a,{strokeDasharray:"3 6"}),Object(E.jsx)(ee.a,{dataKey:"time",interval:2,tick:function(e){var t=e.payload,a=e.x,c=e.y;e.width,e.height,e.value;return Object(E.jsx)("text",{x:a,y:c,fill:"#666",textAnchor:"middle",dy:15,fontSize:12,children:"".concat(t.value,":00")})}}),Object(E.jsx)(te.a,{}),Object(E.jsx)(ae.a,{labelFormatter:function(e,t,a){return"Time: ".concat(e,":00 h")},formatter:function(e,t,a){return function(e,t){var a="";switch(t){case"Temperature \xb0C":a="Temp: ".concat(e," \xb0C");break;case"Precipitation %":a="Rain: ".concat(e," % chance");break;default:a="Default: "+e}return[a]}(e,t)}})]})})]})}var ne=function(e){var t=new Date(1e3*e.day.dt).getDay(),a=L[t].slice(0,3),c=Math.round(e.day.temp.min),n=Math.round(e.day.temp.max),r=e.day.weather[0].description,i=K(e.day.weather[0]);return Object(E.jsxs)(j.a,{variant:"outlined",sx:{width:80,marginBottom:"5px"},children:[Object(E.jsx)(l.a,{sx:{color:"text.secondary",textAlign:"center",fontSize:14},children:a}),Object(E.jsx)("div",{style:{width:"100%"},children:Object(E.jsx)("img",{src:i,alt:r,width:"80px",height:"80px"})}),Object(E.jsxs)(l.a,{sx:{color:"text.primary",textAlign:"center",fontSize:14},children:[n,"\xb0- ",c,"\xb0"]}),Object(E.jsx)(l.a,{sx:{color:"text.secondary",textAlign:"center",fontSize:10},children:r})]})};function re(e){return Object(E.jsx)(o.a,{sx:{display:"flex",flexFlow:"row nowrap",gap:"5px",overflowY:"auto",minWidth:240,marginTop:"10px"},children:e.data.daily.map((function(e){return Object(E.jsx)(ne,{day:e},e.dt)}))})}function ie(){var e=Object(k.e)((function(e){return e.weather})),t=w(e),a=t.data;return t.isLoading?Object(E.jsx)("div",{style:{color:"white",textAlign:"center"},children:Object(E.jsx)("div",{children:"Loading..."})}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(l.a,{variant:"h4",align:"center",sx:{color:"white",paddingTop:2,paddingBottom:2},children:"Weather App"}),Object(E.jsx)(T,{}),Object(E.jsx)(j.a,{elevation:0,children:Object(E.jsx)(x.a,{children:Object(E.jsxs)(h.a,{children:[Object(E.jsx)(Q,{data:a.current}),Object(E.jsx)(ce,{data:a.hourly}),Object(E.jsx)(b.a,{children:Object(E.jsx)(u.a,{label:"Next 7 days",size:"small"})}),Object(E.jsx)(re,{data:a})]})})})]})}var se=function(){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(s.a,{}),Object(E.jsx)(o.a,{sx:{backgroundColor:"#012454",paddingBottom:"50px"},children:Object(E.jsx)(d.a,{maxWidth:"sm",children:Object(E.jsx)(ie,{})})})]})},oe=a(4),de=Object(C.a)({reducer:Object(oe.a)({weather:M},v.reducerPath,v.reducer),middleware:function(e){return e().concat(v.middleware)}});Object(f.e)(de.dispatch);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(E.jsx)(n.a.StrictMode,{children:Object(E.jsx)(k.a,{store:de,children:Object(E.jsx)(se,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[386,1,2]]]);
//# sourceMappingURL=main.88769488.chunk.js.map